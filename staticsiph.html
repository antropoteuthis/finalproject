<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>D3 Static force layout</title>
<style type="text/css">

text {
  font: 10px sans-serif;
}

line {
  stroke: #999;
  stroke-width: 1.5px
  stroke-opacity: 0.6;
}

circle {
  stroke: #999;
  stroke-width: 1.5px;
}

.axis path,
			.axis line {
				fill: none;
				stroke: black;
				shape-rendering: crispEdges;
			}
			
			.axis text {
				font-family: sans-serif;
				font-size: 11px;
			}

</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js">  
</script>
</head>
<body>
<script>

var w = 660,
    h = 500;
var padding = 50;

var colors = {"Nanomia bijuga":"blue", "Agalma elegans":"red", "Hippopodius hippopus":"green", "Muggiaea atlantica":"yellow", "Abylopsis tetragona":"purple", "Physonectae":"black", "Diphyidae":"black", "Calycophorae":"black", "Codonophora":"black"};

var headers = ["node","parent","branch_length","species","istip","Haploneme size (microns)","Haploneme number","Heteroneme size (microns)","Heteroneme number","Rhopaloneme size","Nectophore number"];

var dataset = [[1,6,,"Nanomia bijuga",true,22.5,4500,32,35,11,14],[2,6,,"Agalma elegans",true,35,17000,180,30,7.5,10],[3,8,,"Hippopodius hippopus",true,30,200,84,10,6,16],[4,7,,"Muggiaea atlantica",true,15,300,36,6,6,1],[5,7,,"Abylopsis tetragona",true,52.5,800,155,21,23,2],[6,9,,"Physonectae",false,28.75,10750,106,32.5,9.25,12],[7,8,,"Diphyidae",false,22.5,250,60,8,6,8.5],[8,9,,"Calycophorae",false,26.25,225,72,9,6,12.25],[9,0,,"Codonophora",false,27.5,5487.5,89,20.75,7.625,12.125]];

var minx = d3.min(dataset, function(d) {return d[5];});
var maxx = d3.max(dataset, function(d) {return d[5];});
var miny = d3.min(dataset, function(d) {return d[6];});
var maxy = d3.max(dataset, function(d) {return d[6];});

var nodes = dataset;
var links = dataset;

var force = d3.layout.force()
    .nodes(nodes)
    .links(links)
    .size([w, h]);

var xScale = d3.scale(linear)
				.domain([minx, maxx])
				.range([padding, (w*2) - padding]);

var yScale = d3.scale(linear)
				.domain([miny, maxy])
				.range([(h*2) - padding, padding]);

var xAxis = d3.svg.axis()
    .scale(xScale)
    .orient("bottom")
    .ticks(8);

var yAxis = d3.svg.axis()
    .scale(yScale)
    .orient("left")
    .ticks(6);

var svg = d3.select("body").append("svg")
    .attr("width", w)
    .attr("height", h);

var loading = svg.append("text")
    .attr("x", w / 2)
    .attr("y", h / 2)
    .attr("dy", ".35em")
    .style("text-anchor", "middle")
    .text("Simulating. One moment please…");

// Use a timeout to allow the rest of the page to load first.
setTimeout(function() {

  // Run the layout a fixed number of times.
  // The ideal number of times scales with graph complexity.
  // Of course, don't run too long—you'll hang the page!
  force.start();
  for (var i = n * n; i > 0; --i) force.tick();
  force.stop();

  svg.selectAll("line")
      .data(links)
    .enter().append("line")
      .attr("x1", function(d) { return d[5]; })
      .attr("y1", function(d) { return d[6]; })
      .attr("x2", function(d) { return d[5]; })
      .attr("y2", function(d) { return d[6]; });

  svg.selectAll("circle")
      .data(nodes)
    .enter().append("circle")
      .attr("cx", function(d) { return d[5]; })
      .attr("cy", function(d) { return d[6]; })
      .attr("r", 6.5)
      .attr("fill", function(d) { return colors[d[3]]; })
      .attr("opacity", 0.8);

  svg.selectAll("text")
   		.data(dataset)
   		.enter()
   		.append("text")
		.text(function(d) {return d[3];})
		.attr("x", function(d) {return xscale(d[5]);})
   		.attr("y", function(d) {return yscale(d[6]);})
		.attr("font-family", "arial-black")
   		.attr("font-size", "10px")
   		.attr("fill", "black");

  loading.remove();
}, 10);

</script>
</body>
</html>